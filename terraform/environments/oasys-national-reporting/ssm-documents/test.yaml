---
schemaVersion: "2.2"
description: Test script to check how easy it is to replace scheduled tasks
parameters:
  workingDirectory:
    type: String
    default: ""
    description: "(Optional) The path to the working directory for executing powershell code"
    maxChars: 4096
  executionTimeout:
    type: String
    default: "3600"
    description: "(Optional) The time in seconds for a command to be completed before it is considered to have failed. Default is 3600 (1 hour). Maximum is 172800 (48 hours)."
    allowedPattern: "([1-9][0-9]{0,4})|(1[0-6][0-9]{4})|(17[0-1][0-9]{3})|(172[0-7][0-9]{2})|(172800)"
mainSteps:
  - action: aws:runPowerShellScript
    name: createFileOnServer
    inputs:
      timeoutSeconds: "{{ executionTimeout }}"
      workingDirectory: "{{ workingDirectory }}"
      runCommand: |
        $ErrorActionPreference = "Stop"
        $filePath = "test-file.txt"
        $content = "This is the content to add to the file."
        New-Item -Path $filePath -ItemType File -Force
        Set-Content -Path $filePath -Value $content

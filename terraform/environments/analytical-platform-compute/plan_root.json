Terraform will perform the following actions:

  # helm_release.dashboard_service[0] will be destroyed
  # (because helm_release.dashboard_service is not in configuration)
  - resource "helm_release" "dashboard_service" {
      - atomic                     = false -> null
      - chart                      = "dashboard-service" -> null
      - cleanup_on_fail            = false -> null
      - create_namespace           = false -> null
      - dependency_update          = false -> null
      - disable_crd_hooks          = false -> null
      - disable_openapi_validation = false -> null
      - disable_webhooks           = false -> null
      - force_update               = false -> null
      - id                         = "dashboard-service" -> null
      - lint                       = false -> null
      - max_history                = 0 -> null
      - metadata                   = [
          - {
              - app_version    = "0.1.9"
              - chart          = "dashboard-service"
              - first_deployed = 1745921937
              - last_deployed  = 1749459886
              - name           = "dashboard-service"
              - namespace      = "dashboard-service"
              - revision       = 5
              - values         = jsonencode(
                    {
                      - app     = {
                          - environment = [
                              - {
                                  - name  = "DJANGO_SETTINGS_MODULE"
                                  - value = "dashboard_service.settings.production"
                                },
                              - {
                                  - name  = "APP_ENV"
                                  - value = "production"
                                },
                              - {
                                  - name      = "SECRET_KEY"
                                  - valueFrom = {
                                      - secretKeyRef = {
                                          - key  = "secret-key"
                                          - name = "dashboard-service-app-secrets"
                                        }
                                    }
                                },
                              - {
                                  - name      = "SENTRY_DSN"
                                  - valueFrom = {
                                      - secretKeyRef = {
                                          - key  = "sentry-dsn"
                                          - name = "dashboard-service-app-secrets"
                                        }
                                    }
                                },
                              - {
                                  - name      = "AUTH0_CLIENT_ID"
                                  - valueFrom = {
                                      - secretKeyRef = {
                                          - key  = "auth0-client-id"
                                          - name = "dashboard-service-app-secrets"
                                        }
                                    }
                                },
                              - {
                                  - name      = "AUTH0_CLIENT_SECRET"
                                  - valueFrom = {
                                      - secretKeyRef = {
                                          - key  = "auth0-client-secret"
                                          - name = "dashboard-service-app-secrets"
                                        }
                                    }
                                },
                              - {
                                  - name  = "AUTH0_DOMAIN"
                                  - value = "alpha-analytics-moj.eu.auth0.com"
                                },
                              - {
                                  - name      = "DB_USER"
                                  - valueFrom = {
                                      - secretKeyRef = {
                                          - key  = "username"
                                          - name = "dashboard-service-rds"
                                        }
                                    }
                                },
                              - {
                                  - name      = "DB_PASSWORD"
                                  - valueFrom = {
                                      - secretKeyRef = {
                                          - key  = "password"
                                          - name = "dashboard-service-rds"
                                        }
                                    }
                                },
                              - {
                                  - name      = "DB_HOST"
                                  - valueFrom = {
                                      - secretKeyRef = {
                                          - key  = "address"
                                          - name = "dashboard-service-rds"
                                        }
                                    }
                                },
                              - {
                                  - name      = "DB_PORT"
                                  - valueFrom = {
                                      - secretKeyRef = {
                                          - key  = "port"
                                          - name = "dashboard-service-rds"
                                        }
                                    }
                                },
                              - {
                                  - name  = "DB_NAME"
                                  - value = "dashboard_service"
                                },
                            ]
                        }
                      - ingress = {
                          - annotations = {
                              - "cert-manager.io/cluster-issuer" = "letsencrypt-production-http01"
                            }
                          - className   = "default"
                          - enabled     = true
                          - hosts       = [
                              - {
                                  - host  = "dashboards.analytical-platform.service.justice.gov.uk"
                                  - paths = [
                                      - {
                                          - path     = "/"
                                          - pathType = "ImplementationSpecific"
                                        },
                                    ]
                                },
                            ]
                          - tls         = [
                              - {
                                  - hosts      = [
                                      - "dashboards.analytical-platform.service.justice.gov.uk",
                                    ]
                                  - secretName = "ui-tls"
                                },
                            ]
                        }
                    }
                )
              - version        = "0.1.9"
                # (1 unchanged attribute hidden)
            },
        ] -> null
      - name                       = "dashboard-service" -> null
      - namespace                  = "dashboard-service" -> null
      - pass_credentials           = false -> null
      - recreate_pods              = false -> null
      - render_subchart_notes      = true -> null
      - replace                    = false -> null
      - repository                 = "oci://ghcr.io/ministryofjustice/analytical-platform-charts" -> null
      - reset_values               = false -> null
      - reuse_values               = false -> null
      - skip_crds                  = false -> null
      - status                     = "deployed" -> null
      - timeout                    = 300 -> null
      - values                     = [
          - <<-EOT
                ---
                ingress:
                  enabled: true
                  className: "default"
                  annotations:
                    cert-manager.io/cluster-issuer: letsencrypt-production-http01
                  hosts:
                    - host: dashboards.analytical-platform.service.justice.gov.uk
                      paths:
                        - path: /
                          pathType: ImplementationSpecific
                  tls:
                    - secretName: ui-tls
                      hosts:
                        - dashboards.analytical-platform.service.justice.gov.uk
                
                app:
                  environment:
                    - name: DJANGO_SETTINGS_MODULE
                      value: dashboard_service.settings.production
                    - name: APP_ENV
                      value: production
                    - name: SECRET_KEY
                      valueFrom:
                        secretKeyRef:
                          name: dashboard-service-app-secrets
                          key: secret-key
                    - name: SENTRY_DSN
                      valueFrom:
                        secretKeyRef:
                          name: dashboard-service-app-secrets
                          key: sentry-dsn
                    - name: AUTH0_CLIENT_ID
                      valueFrom:
                        secretKeyRef:
                          name: dashboard-service-app-secrets
                          key: auth0-client-id
                    - name: AUTH0_CLIENT_SECRET
                      valueFrom:
                        secretKeyRef:
                          name: dashboard-service-app-secrets
                          key: auth0-client-secret
                    - name: AUTH0_DOMAIN
                      value: alpha-analytics-moj.eu.auth0.com
                    - name: DB_USER
                      valueFrom:
                        secretKeyRef:
                          name: dashboard-service-rds
                          key: username
                    - name: DB_PASSWORD
                      valueFrom:
                        secretKeyRef:
                          name: dashboard-service-rds
                          key: password
                    - name: DB_HOST
                      valueFrom:
                        secretKeyRef:
                          name: dashboard-service-rds
                          key: address
                    - name: DB_PORT
                      valueFrom:
                        secretKeyRef:
                          name: dashboard-service-rds
                          key: port
                    - name: DB_NAME
                      value: "dashboard_service"
            EOT,
        ] -> null
      - verify                     = false -> null
      - version                    = "0.1.9" -> null
      - wait                       = true -> null
      - wait_for_jobs              = false -> null
    }

  # kubernetes_manifest.dashboard_service_app_secrets_secret[0] will be destroyed
  # (because kubernetes_manifest.dashboard_service_app_secrets_secret is not in configuration)
  - resource "kubernetes_manifest" "dashboard_service_app_secrets_secret" {
      - manifest = {
          - apiVersion = "external-secrets.io/v1beta1"
          - kind       = "ExternalSecret"
          - metadata   = {
              - name      = "dashboard-service-app-secrets"
              - namespace = "dashboard-service"
            }
          - spec       = {
              - data            = [
                  - {
                      - remoteRef = {
                          - key      = "arn:aws:secretsmanager:eu-west-2:REDACTED:secret:dashboard-service/app-secrets-QY414Q"
                          - property = "secret_key"
                        }
                      - secretKey = "secret-key"
                    },
                  - {
                      - remoteRef = {
                          - key      = "arn:aws:secretsmanager:eu-west-2:REDACTED:secret:dashboard-service/app-secrets-QY414Q"
                          - property = "sentry_dsn"
                        }
                      - secretKey = "sentry-dsn"
                    },
                  - {
                      - remoteRef = {
                          - key      = "arn:aws:secretsmanager:eu-west-2:REDACTED:secret:dashboard-service/app-secrets-QY414Q"
                          - property = "auth0_client_id"
                        }
                      - secretKey = "auth0-client-id"
                    },
                  - {
                      - remoteRef = {
                          - decodingStrategy = "Base64"
                          - key              = "arn:aws:secretsmanager:eu-west-2:REDACTED:secret:dashboard-service/app-secrets-QY414Q"
                          - property         = "auth0_client_secret"
                        }
                      - secretKey = "auth0-client-secret"
                    },
                ]
              - refreshInterval = "1m"
              - secretStoreRef  = {
                  - kind = "ClusterSecretStore"
                  - name = "aws-secretsmanager"
                }
              - target          = {
                  - name = "dashboard-service-app-secrets"
                }
            }
        } -> null
      - object   = {
          - apiVersion = "external-secrets.io/v1beta1"
          - kind       = "ExternalSecret"
          - metadata   = {
              - annotations                = null
              - creationTimestamp          = null
              - deletionGracePeriodSeconds = null
              - deletionTimestamp          = null
              - finalizers                 = null
              - generateName               = null
              - generation                 = null
              - labels                     = null
              - managedFields              = null
              - name                       = "dashboard-service-app-secrets"
              - namespace                  = "dashboard-service"
              - ownerReferences            = null
              - resourceVersion            = null
              - selfLink                   = null
              - uid                        = null
            }
          - spec       = {
              - data            = [
                  - {
                      - remoteRef = {
                          - conversionStrategy = "Default"
                          - decodingStrategy   = "None"
                          - key                = "arn:aws:secretsmanager:eu-west-2:REDACTED:secret:dashboard-service/app-secrets-QY414Q"
                          - metadataPolicy     = "None"
                          - property           = "secret_key"
                          - version            = null
                        }
                      - secretKey = "secret-key"
                      - sourceRef = {
                          - generatorRef = {
                              - apiVersion = null
                              - kind       = null
                              - name       = null
                            }
                          - storeRef     = {
                              - kind = null
                              - name = null
                            }
                        }
                    },
                  - {
                      - remoteRef = {
                          - conversionStrategy = "Default"
                          - decodingStrategy   = "None"
                          - key                = "arn:aws:secretsmanager:eu-west-2:REDACTED:secret:dashboard-service/app-secrets-QY414Q"
                          - metadataPolicy     = "None"
                          - property           = "sentry_dsn"
                          - version            = null
                        }
                      - secretKey = "sentry-dsn"
                      - sourceRef = {
                          - generatorRef = {
                              - apiVersion = null
                              - kind       = null
                              - name       = null
                            }
                          - storeRef     = {
                              - kind = null
                              - name = null
                            }
                        }
                    },
                  - {
                      - remoteRef = {
                          - conversionStrategy = "Default"
                          - decodingStrategy   = "None"
                          - key                = "arn:aws:secretsmanager:eu-west-2:REDACTED:secret:dashboard-service/app-secrets-QY414Q"
                          - metadataPolicy     = "None"
                          - property           = "auth0_client_id"
                          - version            = null
                        }
                      - secretKey = "auth0-client-id"
                      - sourceRef = {
                          - generatorRef = {
                              - apiVersion = null
                              - kind       = null
                              - name       = null
                            }
                          - storeRef     = {
                              - kind = null
                              - name = null
                            }
                        }
                    },
                  - {
                      - remoteRef = {
                          - conversionStrategy = "Default"
                          - decodingStrategy   = "Base64"
                          - key                = "arn:aws:secretsmanager:eu-west-2:REDACTED:secret:dashboard-service/app-secrets-QY414Q"
                          - metadataPolicy     = "None"
                          - property           = "auth0_client_secret"
                          - version            = null
                        }
                      - secretKey = "auth0-client-secret"
                      - sourceRef = {
                          - generatorRef = {
                              - apiVersion = null
                              - kind       = null
                              - name       = null
                            }
                          - storeRef     = {
                              - kind = null
                              - name = null
                            }
                        }
                    },
                ]
              - dataFrom        = null
              - refreshInterval = "1m"
              - refreshPolicy   = null
              - secretStoreRef  = {
                  - kind = "ClusterSecretStore"
                  - name = "aws-secretsmanager"
                }
              - target          = {
                  - creationPolicy = "Owner"
                  - deletionPolicy = "Retain"
                  - immutable      = null
                  - name           = "dashboard-service-app-secrets"
                  - template       = {
                      - data          = null
                      - engineVersion = null
                      - mergePolicy   = null
                      - metadata      = {
                          - annotations = null
                          - labels      = null
                        }
                      - templateFrom  = null
                      - type          = null
                    }
                }
            }
        } -> null
    }

  # kubernetes_namespace.dashboard_service[0] will be destroyed
  # (because kubernetes_namespace.dashboard_service is not in configuration)
  - resource "kubernetes_namespace" "dashboard_service" {
      - id                               = "dashboard-service" -> null
      - wait_for_default_service_account = false -> null

      - metadata {
          - annotations      = {} -> null
          - generation       = 0 -> null
          - labels           = {
              - "compute.analytical-platform.service.justice.gov.uk/workload" = "dashboard-service"
              - "pod-security.kubernetes.io/enforce"                          = "restricted"
            } -> null
          - name             = "dashboard-service" -> null
          - resource_version = "245392710" -> null
          - uid              = "548b7933-d687-489f-b23c-3a87207c5533" -> null
            # (1 unchanged attribute hidden)
        }
    }

  # kubernetes_secret.dashboard_service_rds[0] will be destroyed
  # (because kubernetes_secret.dashboard_service_rds is not in configuration)
  - resource "kubernetes_secret" "dashboard_service_rds" {
      - binary_data_wo                 = (write-only attribute) -> null
      - data                           = (sensitive value) -> null
      - data_wo                        = (write-only attribute) -> null
      - id                             = "dashboard-service/dashboard-service-rds" -> null
      - immutable                      = false -> null
      - type                           = "Opaque" -> null
      - wait_for_service_account_token = true -> null

      - metadata {
          - annotations      = {} -> null
          - generation       = 0 -> null
          - labels           = {} -> null
          - name             = "dashboard-service-rds" -> null
          - namespace        = "dashboard-service" -> null
          - resource_version = "248988110" -> null
          - uid              = "5135faf5-bd9b-4b44-8f11-5f907a377349" -> null
            # (1 unchanged attribute hidden)
        }
    }

  # random_password.dashboard_service_rds[0] will be destroyed
  # (because random_password.dashboard_service_rds is not in configuration)
  - resource "random_password" "dashboard_service_rds" {
      - bcrypt_hash = (sensitive value) -> null
      - id          = "none" -> null
      - length      = 32 -> null
      - lower       = true -> null
      - min_lower   = 0 -> null
      - min_numeric = 0 -> null
      - min_special = 0 -> null
      - min_upper   = 0 -> null
      - number      = true -> null
      - numeric     = true -> null
      - result      = (sensitive value) -> null
      - special     = false -> null
      - upper       = true -> null
    }

  # random_password.dashboard_service_secret_key[0] will be destroyed
  # (because random_password.dashboard_service_secret_key is not in configuration)
  - resource "random_password" "dashboard_service_secret_key" {
      - bcrypt_hash = (sensitive value) -> null
      - id          = "none" -> null
      - length      = 32 -> null
      - lower       = true -> null
      - min_lower   = 0 -> null
      - min_numeric = 0 -> null
      - min_special = 0 -> null
      - min_upper   = 0 -> null
      - number      = true -> null
      - numeric     = true -> null
      - result      = (sensitive value) -> null
      - special     = false -> null
      - upper       = true -> null
    }

  # module.dashboard_service_app_secrets[0].aws_secretsmanager_secret.this[0] will be destroyed
  # (because aws_secretsmanager_secret.this is not in configuration)
  - resource "aws_secretsmanager_secret" "this" {
      - arn                            = "arn:aws:secretsmanager:eu-west-2:REDACTED:secret:dashboard-service/app-secrets-QY414Q" -> null
      - force_overwrite_replica_secret = false -> null
      - id                             = "arn:aws:secretsmanager:eu-west-2:REDACTED:secret:dashboard-service/app-secrets-QY414Q" -> null
      - kms_key_id                     = "arn:aws:kms:eu-west-2:REDACTED:key/bc9a79f1-426e-44a3-9eac-fa68a73e7898" -> null
      - name                           = "dashboard-service/app-secrets" -> null
      - recovery_window_in_days        = 30 -> null
      - tags                           = {
          - "application"            = "analytical-platform-compute"
          - "business-unit"          = "Platforms"
          - "environment-name"       = "analytical-platform-compute-production"
          - "infrastructure-support" = "analytical-platform@digital.justice.gov.uk"
          - "is-production"          = "true"
          - "owner"                  = "Analytical Platform: analytical-platform@digital.justice.gov.uk"
          - "source-code"            = "https://github.com/ministryofjustice/modernisation-platform-environments"
        } -> null
      - tags_all                       = {
          - "application"            = "analytical-platform-compute"
          - "business-unit"          = "Platforms"
          - "environment-name"       = "analytical-platform-compute-production"
          - "infrastructure-support" = "analytical-platform@digital.justice.gov.uk"
          - "is-production"          = "true"
          - "owner"                  = "Analytical Platform: analytical-platform@digital.justice.gov.uk"
          - "source-code"            = "https://github.com/ministryofjustice/modernisation-platform-environments"
        } -> null
        # (3 unchanged attributes hidden)
    }

  # module.dashboard_service_app_secrets[0].aws_secretsmanager_secret_version.ignore_changes[0] will be destroyed
  # (because aws_secretsmanager_secret_version.ignore_changes is not in configuration)
  - resource "aws_secretsmanager_secret_version" "ignore_changes" {
      - arn              = "arn:aws:secretsmanager:eu-west-2:REDACTED:secret:dashboard-service/app-secrets-QY414Q" -> null
      - id               = "arn:aws:secretsmanager:eu-west-2:REDACTED:secret:dashboard-service/app-secrets-QY414Q|terraform-20250423104356173500000002" -> null
      - secret_id        = "arn:aws:secretsmanager:eu-west-2:REDACTED:secret:dashboard-service/app-secrets-QY414Q" -> null
      - secret_string    = (sensitive value) -> null
      - secret_string_wo = (write-only attribute) -> null
      - version_id       = "terraform-20250423104356173500000002" -> null
      - version_stages   = [
          - "AWSPREVIOUS",
        ] -> null
        # (1 unchanged attribute hidden)
    }

  # module.dashboard_service_rds_kms[0].aws_kms_alias.this["rds/dashboard-service"] will be destroyed
  # (because aws_kms_alias.this is not in configuration)
  - resource "aws_kms_alias" "this" {
      - arn            = "arn:aws:kms:eu-west-2:REDACTED:alias/rds/dashboard-service" -> null
      - id             = "alias/rds/dashboard-service" -> null
      - name           = "alias/rds/dashboard-service" -> null
      - target_key_arn = "arn:aws:kms:eu-west-2:REDACTED:key/43272848-0bb7-4abe-95ca-73c059656b58" -> null
      - target_key_id  = "43272848-0bb7-4abe-95ca-73c059656b58" -> null
        # (1 unchanged attribute hidden)
    }

  # module.dashboard_service_rds_kms[0].aws_kms_key.this[0] will be destroyed
  # (because aws_kms_key.this is not in configuration)
  - resource "aws_kms_key" "this" {
      - arn                                = "arn:aws:kms:eu-west-2:REDACTED:key/43272848-0bb7-4abe-95ca-73c059656b58" -> null
      - bypass_policy_lockout_safety_check = false -> null
      - customer_master_key_spec           = "SYMMETRIC_DEFAULT" -> null
      - deletion_window_in_days            = 7 -> null
      - description                        = "Dashboard Service RDS KMS key" -> null
      - enable_key_rotation                = true -> null
      - id                                 = "43272848-0bb7-4abe-95ca-73c059656b58" -> null
      - is_enabled                         = true -> null
      - key_id                             = "43272848-0bb7-4abe-95ca-73c059656b58" -> null
      - key_usage                          = "ENCRYPT_DECRYPT" -> null
      - multi_region                       = false -> null
      - policy                             = jsonencode(
            {
              - Statement = [
                  - {
                      - Action    = "kms:*"
                      - Effect    = "Allow"
                      - Principal = {
                          - AWS = "arn:aws:iam::REDACTED:root"
                        }
                      - Resource  = "*"
                      - Sid       = "Default"
                    },
                ]
              - Version   = "2012-10-17"
            }
        ) -> null
      - rotation_period_in_days            = 365 -> null
      - tags                               = {
          - "application"            = "analytical-platform-compute"
          - "business-unit"          = "Platforms"
          - "environment-name"       = "analytical-platform-compute-production"
          - "infrastructure-support" = "analytical-platform@digital.justice.gov.uk"
          - "is-production"          = "true"
          - "owner"                  = "Analytical Platform: analytical-platform@digital.justice.gov.uk"
          - "source-code"            = "https://github.com/ministryofjustice/modernisation-platform-environments"
        } -> null
      - tags_all                           = {
          - "application"            = "analytical-platform-compute"
          - "business-unit"          = "Platforms"
          - "environment-name"       = "analytical-platform-compute-production"
          - "infrastructure-support" = "analytical-platform@digital.justice.gov.uk"
          - "is-production"          = "true"
          - "owner"                  = "Analytical Platform: analytical-platform@digital.justice.gov.uk"
          - "source-code"            = "https://github.com/ministryofjustice/modernisation-platform-environments"
        } -> null
        # (2 unchanged attributes hidden)
    }

  # module.dashboard_service_rds[0].module.db_instance.aws_db_instance.this[0] will be destroyed
  # (because aws_db_instance.this is not in configuration)
  - resource "aws_db_instance" "this" {
      - address                               = "dashboard-service.ctm0ssueubgh.eu-west-2.rds.amazonaws.com" -> null
      - allocated_storage                     = 64 -> null
      - allow_major_version_upgrade           = false -> null
      - apply_immediately                     = false -> null
      - arn                                   = "arn:aws:rds:eu-west-2:REDACTED:db:dashboard-service" -> null
      - auto_minor_version_upgrade            = true -> null
      - availability_zone                     = "eu-west-2b" -> null
      - backup_retention_period               = 7 -> null
      - backup_target                         = "region" -> null
      - backup_window                         = "03:00-06:00" -> null
      - ca_cert_identifier                    = "rds-ca-rsa2048-g1" -> null
      - copy_tags_to_snapshot                 = false -> null
      - customer_owned_ip_enabled             = false -> null
      - database_insights_mode                = "standard" -> null
      - db_name                               = "dashboard_service" -> null
      - db_subnet_group_name                  = "analytical-platform-compute-production" -> null
      - dedicated_log_volume                  = false -> null
      - delete_automated_backups              = true -> null
      - deletion_protection                   = true -> null
      - domain_dns_ips                        = [] -> null
      - enabled_cloudwatch_logs_exports       = [
          - "postgresql",
          - "upgrade",
        ] -> null
      - endpoint                              = "dashboard-service.ctm0ssueubgh.eu-west-2.rds.amazonaws.com:5432" -> null
      - engine                                = "postgres" -> null
      - engine_lifecycle_support              = "open-source-rds-extended-support" -> null
      - engine_version                        = "17" -> null
      - engine_version_actual                 = "17.4" -> null
      - hosted_zone_id                        = "Z1TTGA775OQIYO" -> null
      - iam_database_authentication_enabled   = false -> null
      - id                                    = "db-M6UNN67ITI2C63RYHGFJDXG57M" -> null
      - identifier                            = "dashboard-service" -> null
      - instance_class                        = "db.t4g.medium" -> null
      - iops                                  = 0 -> null
      - kms_key_id                            = "arn:aws:kms:eu-west-2:REDACTED:key/43272848-0bb7-4abe-95ca-73c059656b58" -> null
      - latest_restorable_time                = "2025-06-13T15:14:38Z" -> null
      - license_model                         = "postgresql-license" -> null
      - listener_endpoint                     = [] -> null
      - maintenance_window                    = "mon:00:00-mon:03:00" -> null
      - master_user_secret                    = [] -> null
      - max_allocated_storage                 = 256 -> null
      - monitoring_interval                   = 30 -> null
      - monitoring_role_arn                   = "arn:aws:iam::REDACTED:role/dashboard-service-rds-monitoring-20250423141819084700000002" -> null
      - multi_az                              = true -> null
      - network_type                          = "IPV4" -> null
      - option_group_name                     = "default:postgres-17" -> null
      - parameter_group_name                  = "dashboard-service-20250423141819055200000001" -> null
      - password                              = (sensitive value) -> null
      - password_wo                           = (write-only attribute) -> null
      - performance_insights_enabled          = true -> null
      - performance_insights_kms_key_id       = "arn:aws:kms:eu-west-2:REDACTED:key/e308eaaf-26fe-4e9b-bea6-1908f2cc76b0" -> null
      - performance_insights_retention_period = 7 -> null
      - port                                  = 5432 -> null
      - publicly_accessible                   = false -> null
      - replicas                              = [] -> null
      - resource_id                           = "db-M6UNN67ITI2C63RYHGFJDXG57M" -> null
      - skip_final_snapshot                   = true -> null
      - status                                = "available" -> null
      - storage_encrypted                     = true -> null
      - storage_throughput                    = 0 -> null
      - storage_type                          = "gp2" -> null
      - tags                                  = {
          - "application"            = "analytical-platform-compute"
          - "business-unit"          = "Platforms"
          - "environment-name"       = "analytical-platform-compute-production"
          - "infrastructure-support" = "analytical-platform@digital.justice.gov.uk"
          - "is-production"          = "true"
          - "owner"                  = "Analytical Platform: analytical-platform@digital.justice.gov.uk"
          - "source-code"            = "https://github.com/ministryofjustice/modernisation-platform-environments"
        } -> null
      - tags_all                              = {
          - "application"            = "analytical-platform-compute"
          - "business-unit"          = "Platforms"
          - "environment-name"       = "analytical-platform-compute-production"
          - "infrastructure-support" = "analytical-platform@digital.justice.gov.uk"
          - "is-production"          = "true"
          - "owner"                  = "Analytical Platform: analytical-platform@digital.justice.gov.uk"
          - "source-code"            = "https://github.com/ministryofjustice/modernisation-platform-environments"
        } -> null
      - username                              = "dashboard_service" -> null
      - vpc_security_group_ids                = [
          - "sg-05c2ec95dceee658f",
        ] -> null
        # (12 unchanged attributes hidden)

      - timeouts {}
    }

  # module.dashboard_service_rds[0].module.db_instance.aws_iam_role.enhanced_monitoring[0] will be destroyed
  # (because aws_iam_role.enhanced_monitoring is not in configuration)
  - resource "aws_iam_role" "enhanced_monitoring" {
      - arn                   = "arn:aws:iam::REDACTED:role/dashboard-service-rds-monitoring-20250423141819084700000002" -> null
      - assume_role_policy    = jsonencode(
            {
              - Statement = [
                  - {
                      - Action    = "sts:AssumeRole"
                      - Effect    = "Allow"
                      - Principal = {
                          - Service = "monitoring.rds.amazonaws.com"
                        }
                    },
                ]
              - Version   = "2012-10-17"
            }
        ) -> null
      - create_date           = "2025-04-23T14:18:19Z" -> null
      - description           = "Enhanced Monitoring for Dashbaord Service RDS" -> null
      - force_detach_policies = false -> null
      - id                    = "dashboard-service-rds-monitoring-20250423141819084700000002" -> null
      - managed_policy_arns   = [
          - "arn:aws:iam::aws:policy/service-role/AmazonRDSEnhancedMonitoringRole",
        ] -> null
      - max_session_duration  = 3600 -> null
      - name                  = "dashboard-service-rds-monitoring-20250423141819084700000002" -> null
      - name_prefix           = "dashboard-service-rds-monitoring-" -> null
      - path                  = "/" -> null
      - tags                  = {
          - "Name"                   = "dashboard-service-rds-monitoring"
          - "application"            = "analytical-platform-compute"
          - "business-unit"          = "Platforms"
          - "environment-name"       = "analytical-platform-compute-production"
          - "infrastructure-support" = "analytical-platform@digital.justice.gov.uk"
          - "is-production"          = "true"
          - "owner"                  = "Analytical Platform: analytical-platform@digital.justice.gov.uk"
          - "source-code"            = "https://github.com/ministryofjustice/modernisation-platform-environments"
        } -> null
      - tags_all              = {
          - "Name"                   = "dashboard-service-rds-monitoring"
          - "application"            = "analytical-platform-compute"
          - "business-unit"          = "Platforms"
          - "environment-name"       = "analytical-platform-compute-production"
          - "infrastructure-support" = "analytical-platform@digital.justice.gov.uk"
          - "is-production"          = "true"
          - "owner"                  = "Analytical Platform: analytical-platform@digital.justice.gov.uk"
          - "source-code"            = "https://github.com/ministryofjustice/modernisation-platform-environments"
        } -> null
      - unique_id             = "AROA6ODU2FA5SVFCLHB3G" -> null
        # (1 unchanged attribute hidden)
    }

  # module.dashboard_service_rds[0].module.db_instance.aws_iam_role_policy_attachment.enhanced_monitoring[0] will be destroyed
  # (because aws_iam_role_policy_attachment.enhanced_monitoring is not in configuration)
  - resource "aws_iam_role_policy_attachment" "enhanced_monitoring" {
      - id         = "dashboard-service-rds-monitoring-20250423141819084700000002-20250423141819602300000003" -> null
      - policy_arn = "arn:aws:iam::aws:policy/service-role/AmazonRDSEnhancedMonitoringRole" -> null
      - role       = "dashboard-service-rds-monitoring-20250423141819084700000002" -> null
    }

  # module.dashboard_service_rds[0].module.db_parameter_group.aws_db_parameter_group.this[0] will be destroyed
  # (because aws_db_parameter_group.this is not in configuration)
  - resource "aws_db_parameter_group" "this" {
      - arn          = "arn:aws:rds:eu-west-2:REDACTED:pg:dashboard-service-20250423141819055200000001" -> null
      - description  = "dashboard-service parameter group" -> null
      - family       = "postgres17" -> null
      - id           = "dashboard-service-20250423141819055200000001" -> null
      - name         = "dashboard-service-20250423141819055200000001" -> null
      - name_prefix  = "dashboard-service-" -> null
      - skip_destroy = false -> null
      - tags         = {
          - "Name"                   = "dashboard-service"
          - "application"            = "analytical-platform-compute"
          - "business-unit"          = "Platforms"
          - "environment-name"       = "analytical-platform-compute-production"
          - "infrastructure-support" = "analytical-platform@digital.justice.gov.uk"
          - "is-production"          = "true"
          - "owner"                  = "Analytical Platform: analytical-platform@digital.justice.gov.uk"
          - "source-code"            = "https://github.com/ministryofjustice/modernisation-platform-environments"
        } -> null
      - tags_all     = {
          - "Name"                   = "dashboard-service"
          - "application"            = "analytical-platform-compute"
          - "business-unit"          = "Platforms"
          - "environment-name"       = "analytical-platform-compute-production"
          - "infrastructure-support" = "analytical-platform@digital.justice.gov.uk"
          - "is-production"          = "true"
          - "owner"                  = "Analytical Platform: analytical-platform@digital.justice.gov.uk"
          - "source-code"            = "https://github.com/ministryofjustice/modernisation-platform-environments"
        } -> null

      - parameter {
          - apply_method = "immediate" -> null
          - name         = "log_connections" -> null
          - value        = "1" -> null
        }
      - parameter {
          - apply_method = "immediate" -> null
          - name         = "log_hostname" -> null
          - value        = "1" -> null
        }
      - parameter {
          - apply_method = "immediate" -> null
          - name         = "log_statement" -> null
          - value        = "all" -> null
        }
      - parameter {
          - apply_method = "pending-reboot" -> null
          - name         = "rds.force_ssl" -> null
          - value        = "1" -> null
        }
    }

Plan: 0 to add, 0 to change, 14 to destroy.

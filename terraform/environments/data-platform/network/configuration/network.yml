# The two /18s are the unallocated ranges from Analytical Platform Compute
# (https://github.com/ministryofjustice/modernisation-platform-environments/blob/main/terraform/environments/analytical-platform-compute/configuration/networking/ipam.yaml#L55-L56)
#
# non-production allocation is 10.200.128.0/18 | 10.200.128.1 - 10.200.191.254 (16382), split between test and preproduction
#   development allocation is non-routable on the corporate network
#   test allocation is 10.200.128.0/19 | 10.200.128.0 - 10.200.159.255 (8190)
#   preproduction allocation is 10.200.160.0/19 | 10.200.160.0 - 10.200.191.255 (8190)
# production allocation is 10.200.192.0/18 | 10.200.192.0 - 10.200.255.255 (16382)

environment:
  development:
    network_firewall:
      permissive_mode: true
    vpc:
      cidr_block: 10.199.128.0/19 # 10.199.128.0 - 10.199.159.255 (8190)
      additional_cidr_blocks:
        transit_gateway:
            cidr_block: 100.64.255.0/24
            subnets:
              attachments:
                a: 100.64.255.0/28
                b: 100.64.255.16/28
                c: 100.64.255.32/28
                # unallocated: 100.64.255.48/28
      subnets:
        data: # 10.199.128.0/23 | 10.199.128.0 - 10.199.129.255 (510)
          a: 10.199.128.0/25 # 10.199.128.0  - 10.199.128.127 (126)
          b: 10.199.128.128/25 # 10.199.128.128 - 10.199.128.255 (126)
          c: 10.199.129.0/25 # 10.199.129.0 - 10.199.129.127 (126)
          # unallocated: 10.199.129.128/25 # 10.199.129.128 - 10.199.129.255 (126)
        firewall: # 10.199.130.0/23 | 10.199.130.0 - 10.199.131.255 (510)
          a: 10.199.130.0/25 # 10.199.130.0 - 10.199.130.127 (126)
          b: 10.199.130.128/25 # 10.199.130.128 - 10.199.130.255 (126)
          c: 10.199.131.0/25 # 10.199.131.0 - 10.199.131.127 (126)
          # unallocated: 10.199.131.128/25 # 10.199.131.128 - 10.199.131.255 (126)
        public: # 10.199.132.0/23 | 10.199.132.0 - 10.199.133.255 (510)
          a: 10.199.132.0/25 # 10.199.132.0 - 10.199.132.127 (126)
          b: 10.199.132.128/25 # 10.199.132.128 - 10.199.132.255 (126)
          c: 10.199.133.0/25 # 10.199.133.0 - 10.199.133.127 (126)
          # unallocated: 10.199.133.128/25 # 10.199.133.128 - 10.199.133.255 (126)
          tags:
            kubernetes.io/role/elb: 1
        # 10.199.134.0 - 10.199.143.255 reserved for future use
        private: # 10.199.144.0/20 | 10.199.144.0 - 10.199.159.255 (4094)
          a: 10.199.144.0/22 # 10.199.144.0 - 10.199.147.255 (1022)
          b: 10.199.148.0/22 # 10.199.148.0 - 10.199.151.255 (1022)
          c: 10.199.152.0/22 # 10.199.152.0 - 10.199.155.255 (1022)
          # unallocated: 10.199.156.0/22 # 10.199.156.0 - 10.199.159.255 (1022)
          tags:
            kubernetes.io/role/internal-elb: 1
            karpenter.sh/discovery: ${environment}
    transit_gateway:
      routes:
        - name: internal
          cidr: 10.0.0.0/8
          description: MOJ internal
        - name: cloud-platform
          cidr: 172.20.0.0/16
          description: Cloud Platform
  test:
    network_firewall:
      permissive_mode: true
    vpc:
      cidr_block: 10.200.128.0/19 # 10.200.128.0 - 10.200.159.255 (8190)
      additional_cidr_blocks:
        transit_gateway:
            cidr_block: 100.64.255.0/24
            subnets:
              attachments:
                a: 100.64.255.0/28
                b: 100.64.255.16/28
                c: 100.64.255.32/28
                # unallocated: 100.64.255.48/28
      subnets:
        data: # 10.200.128.0/23 | 10.200.128.0 - 10.200.129.255 (510)
          a: 10.200.128.0/25 # 10.200.128.0  - 10.200.128.127 (126)
          b: 10.200.128.128/25 # 10.200.128.128 - 10.200.128.255 (126)
          c: 10.200.129.0/25 # 10.200.129.0 - 10.200.129.127 (126)
          # unallocated: 10.200.129.128/25 # 10.200.129.128 - 10.200.129.255 (126)
        firewall: # 10.200.130.0/23 | 10.200.130.0 - 10.200.131.255 (510)
          a: 10.200.130.0/25 # 10.200.130.0 - 10.200.130.127 (126)
          b: 10.200.130.128/25 # 10.200.130.128 - 10.200.130.255 (126)
          c: 10.200.131.0/25 # 10.200.131.0 - 10.200.131.127 (126)
          # unallocated: 10.200.131.128/25 # 10.200.131.128 - 10.200.131.255 (126)
        public: # 10.200.132.0/23 | 10.200.132.0 - 10.200.133.255 (510)
          a: 10.200.132.0/25 # 10.200.132.0 - 10.200.132.127 (126)
          b: 10.200.132.128/25 # 10.200.132.128 - 10.200.132.255 (126)
          c: 10.200.133.0/25 # 10.200.133.0 - 10.200.133.127 (126)
          # unallocated: 10.200.133.128/25 # 10.200.133.128 - 10.200.133.255 (126)
          tags:
            kubernetes.io/role/elb: 1
        # 10.200.134.0 - 10.200.143.255 reserved for future use
        private: # 10.200.144.0/20 | 10.200.144.0 - 10.200.159.255 (4094)
          a: 10.200.144.0/22 # 10.200.144.0 - 10.200.147.255 (1022)
          b: 10.200.148.0/22 # 10.200.148.0 - 10.200.151.255 (1022)
          c: 10.200.152.0/22 # 10.200.152.0 - 10.200.155.255 (1022)
          # unallocated: 10.200.156.0/22 # 10.200.156.0 - 10.200.159.255 (1022)
          tags:
            kubernetes.io/role/internal-elb: 1
            karpenter.sh/discovery: ${environment}
    transit_gateway:
      routes:
        - name: internal
          cidr: 10.0.0.0/8
          description: MOJ internal
        - name: cloud-platform
          cidr: 172.20.0.0/16
          description: Cloud Platform
  preproduction:
    network_firewall:
      permissive_mode: true
    vpc:
      cidr_block: 10.200.160.0/19 # 10.200.160.0 - 10.200.191.255 (8190)
      additional_cidr_blocks:
        transit_gateway:
            cidr_block: 100.64.255.0/24
            subnets:
              attachments:
                a: 100.64.255.0/28
                b: 100.64.255.16/28
                c: 100.64.255.32/28
                # unallocated: 100.64.255.48/28
      subnets:
        data: # 10.200.160.0/23 | 10.200.160.0 - 10.200.161.255 (510)
          a: 10.200.160.0/25 # 10.200.160.0 - 10.200.160.127 (126)
          b: 10.200.160.128/25 # 10.200.160.128 - 10.200.160.255 (126)
          c: 10.200.161.0/25 # 10.200.161.0 - 10.200.161.127 (126)
          # unallocated: 10.200.161.128/25 # 10.200.161.128 - 10.200.161.255 (126)
        firewall: # 10.200.162.0/23 | 10.200.162.0 - 10.200.163.255 (510)
          a: 10.200.162.0/25 # 10.200.162.0 - 10.200.162.127 (126)
          b: 10.200.162.128/25 # 10.200.162.128 - 10.200.162.255 (126)
          c: 10.200.163.0/25 # 10.200.163.0 - 10.200.163.127 (126)
          # unallocated: 10.200.163.128/25 # 10.200.163.128 - 10.200.163.255 (126)
        public: # 10.200.164.0/23 | 10.200.164.0 - 10.200.165.255 (510)
          a: 10.200.164.0/25 # 10.200.164.0 - 10.200.164.127 (126)
          b: 10.200.164.128/25 # 10.200.164.128 - 10.200.164.255 (126)
          c: 10.200.165.0/25 # 10.200.165.0 - 10.200.165.127 (126)
          # unallocated: 10.200.165.128/25 # 10.200.165.128 - 10.200.165.255 (126)
          tags:
            kubernetes.io/role/elb: 1
        # 10.200.166.0 - 10.200.175.255 reserved for future use
        private: # 10.200.176.0/20 | 10.200.176.0 - 10.200.191.255 (4094)
          a: 10.200.176.0/22 # 10.200.176.0 - 10.200.179.255 (1022)
          b: 10.200.180.0/22 # 10.200.180.0 - 10.200.183.255 (1022)
          c: 10.200.184.0/22 # 10.200.184.0 - 10.200.187.255 (1022)
          # unallocated: 10.200.188.0/22 # 10.200.188.0 - 10.200.191.255 (1022)
          tags:
            kubernetes.io/role/internal-elb: 1
            karpenter.sh/discovery: ${environment}
    transit_gateway:
      routes:
        - name: internal
          cidr: 10.0.0.0/8
          description: MOJ internal
        - name: cloud-platform
          cidr: 172.20.0.0/16
          description: Cloud Platform
  production:
    network_firewall:
      permissive_mode: true
    vpc: 
      cidr_block: 10.200.192.0/18 # 10.200.192.0 - 10.200.255.255 (16382)
      additional_cidr_blocks:
        transit_gateway:
            cidr_block: 100.64.255.0/24
            subnets:
              attachments:
                a: 100.64.255.0/28
                b: 100.64.255.16/28
                c: 100.64.255.32/28
                # unallocated: 100.64.255.48/28
      subnets:
        data: # 10.200.192.0/22 | 10.200.192.0 - 10.200.195.255 (1022)
          a: 10.200.192.0/24 # 10.200.192.0 - 10.200.192.255 (254)
          b: 10.200.193.0/24 # 10.200.193.0 - 10.200.193.255 (254)
          c: 10.200.194.0/24 # 10.200.194.0 - 10.200.194.255 (254)
          # unallocated: 10.200.195.0/24 # 10.200.195.0 - 10.200.195.255 (254)
        firewall: # 10.200.196.0/22 | 10.200.196.0 - 10.200.199.255 (1022)
          a: 10.200.196.0/24 # 10.200.196.0 - 10.200.196.255 (254)
          b: 10.200.197.0/24 # 10.200.197.0 - 10.200.197.255 (254)
          c: 10.200.198.0/24 # 10.200.198.0 - 10.200.198.255 (254)
          # unallocated: 10.200.199.0/24 # 10.200.199.0 - 10.200.199.255 (254)
        public: # 10.200.200.0/22 | 10.200.200.0 - 10.200.203.255 (1022)
          a: 10.200.200.0/24 # 10.200.200.0 - 10.200.200.255 (254)
          b: 10.200.201.0/24 # 10.200.201.0 - 10.200.201.255 (254)
          c: 10.200.202.0/24 # 10.200.202.0 - 10.200.202.255 (254)
          # unallocated: 10.200.203.0/24 # 10.200.203.0 - 10.200.203.255 (254)
          tags:
            kubernetes.io/role/elb: 1
        # 10.200.204.0 - 10.200.223.255 reserved for future use
        private: # 10.200.224.0/19 | 10.200.224.0 - 10.200.255.255 (8190)
          a: 10.200.224.0/21 # 10.200.224.0 - 10.200.231.255 (2046)
          b: 10.200.232.0/21 # 10.200.232.0 - 10.200.239.255 (2046)
          c: 10.200.240.0/21 # 10.200.240.0 - 10.200.247.255 (2046)
          # unallocated: 10.200.248.0/21 # 10.200.248.0 - 10.200.255.255 (2046)
          tags:
            kubernetes.io/role/internal-elb: 1
            karpenter.sh/discovery: ${environment}
    transit_gateway:
      routes:
        - name: internal
          cidr: 10.0.0.0/8
          description: MOJ internal
        - name: cloud-platform
          cidr: 172.20.0.0/16
          description: Cloud Platform

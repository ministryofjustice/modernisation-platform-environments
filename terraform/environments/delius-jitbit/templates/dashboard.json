{
  "widgets": [
    {
      "height": 6,
      "width": 12,
      "y": 1,
      "x": 0,
      "type": "metric",
      "properties": {
        "metrics": [
          [
            "ECS/ContainerInsights",
            "CpuUtilized",
            "ServiceName",
            "hmpps-development-delius-jitbit",
            "ClusterName",
            "hmpps-development-delius-jitbit",
            { "label": "delius-jitbit-service" }
          ],
          [".", ".", "ClusterName", ".", { "label": "delius-jitbit-cluster" }]
        ],
        "view": "timeSeries",
        "stacked": true,
        "region": "eu-west-2",
        "title": "CPU Utilization",
        "stat": "Average",
        "period": 300
      }
    },
    {
      "height": 6,
      "width": 12,
      "y": 1,
      "x": 12,
      "type": "metric",
      "properties": {
        "metrics": [
          [
            "ECS/ContainerInsights",
            "MemoryUtilized",
            "ServiceName",
            "hmpps-development-delius-jitbit",
            "ClusterName",
            "hmpps-development-delius-jitbit",
            { "label": "delius-jitbit-service" }
          ],
          [".", ".", "ClusterName", ".", { "label": "delius-jitbit-cluster" }]
        ],
        "view": "timeSeries",
        "stacked": true,
        "region": "eu-west-2",
        "title": "Memory Utilization",
        "stat": "Average",
        "period": 300
      }
    },
    {
      "height": 6,
      "width": 12,
      "y": 7,
      "x": 0,
      "type": "metric",
      "properties": {
        "metrics": [["JitbitMetrics", "ErrorCount", { "color": "#d62728" }]],
        "view": "timeSeries",
        "stacked": true,
        "region": "eu-west-2",
        "stat": "Average",
        "period": 300,
        "title": "Jitbit Application Errors"
      }
    },
    {
      "height": 6,
      "width": 12,
      "y": 7,
      "x": 12,
      "type": "log",
      "properties": {
        "query": "SOURCE 'delius-jitbit-ecs' | fields @timestamp, @message, @logStream, @log\n| filter @message like /Error in Helpdesk/\n| sort @timestamp desc\n| limit 20",
        "region": "eu-west-2",
        "stacked": false,
        "view": "table",
        "title": "Jitbit Error Logs"
      }
    },
    {
      "height": 1,
      "width": 24,
      "y": 0,
      "x": 0,
      "type": "text",
      "properties": {
        "markdown": "App Metrics"
      }
    },
    {
      "height": 1,
      "width": 24,
      "y": 13,
      "x": 0,
      "type": "text",
      "properties": {
        "markdown": "LB Metrics"
      }
    },
    {
      "height": 6,
      "width": 8,
      "y": 14,
      "x": 16,
      "type": "metric",
      "properties": {
        "view": "timeSeries",
        "stacked": true,
        "metrics": [
          [
            "AWS/ApplicationELB",
            "HealthyHostCount",
            "TargetGroup",
            "targetgroup/delius-jitbit/2da552f38f422207",
            "LoadBalancer",
            "app/delius-jitbit-lb/b439505d1acde0b2"
          ]
        ],
        "region": "eu-west-2"
      }
    },
    {
      "height": 1,
      "width": 24,
      "y": 20,
      "x": 0,
      "type": "text",
      "properties": {
        "markdown": "RDS Metrics"
      }
    },
    {
      "height": 6,
      "width": 6,
      "y": 21,
      "x": 0,
      "type": "metric",
      "properties": {
        "view": "timeSeries",
        "stacked": false,
        "metrics": [
          [
            "AWS/RDS",
            "ReadIOPS",
            "DBInstanceIdentifier",
            "delius-jitbit-development-database"
          ],
          [".", "WriteIOPS", ".", "."]
        ],
        "region": "eu-west-2",
        "title": "IOPS"
      }
    },
    {
      "height": 6,
      "width": 6,
      "y": 21,
      "x": 6,
      "type": "metric",
      "properties": {
        "view": "timeSeries",
        "stacked": false,
        "metrics": [
          [
            "AWS/RDS",
            "CPUUtilization",
            "DBInstanceIdentifier",
            "delius-jitbit-development-database"
          ]
        ],
        "region": "eu-west-2",
        "title": "CPU Utilization"
      }
    },
    {
      "height": 6,
      "width": 6,
      "y": 21,
      "x": 12,
      "type": "metric",
      "properties": {
        "view": "timeSeries",
        "stacked": false,
        "metrics": [
          [
            "AWS/RDS",
            "FreeStorageSpace",
            "DBInstanceIdentifier",
            "delius-jitbit-development-database"
          ]
        ],
        "region": "eu-west-2",
        "title": "Free Storage Space"
      }
    },
    {
      "height": 6,
      "width": 6,
      "y": 21,
      "x": 18,
      "type": "metric",
      "properties": {
        "view": "timeSeries",
        "stacked": true,
        "metrics": [
          [
            "AWS/RDS",
            "DatabaseConnections",
            "DBInstanceIdentifier",
            "delius-jitbit-development-database"
          ]
        ],
        "region": "eu-west-2",
        "title": "DB Connections"
      }
    },
    {
      "height": 6,
      "width": 6,
      "y": 27,
      "x": 0,
      "type": "metric",
      "properties": {
        "view": "timeSeries",
        "stacked": true,
        "metrics": [
          [
            "AWS/RDS",
            "ReadLatency",
            "DBInstanceIdentifier",
            "delius-jitbit-development-database"
          ],
          [".", "WriteLatency", ".", "."]
        ],
        "region": "eu-west-2",
        "title": "Latency"
      }
    },
    {
      "height": 6,
      "width": 6,
      "y": 27,
      "x": 6,
      "type": "metric",
      "properties": {
        "view": "timeSeries",
        "stacked": true,
        "metrics": [
          [
            "AWS/RDS",
            "NetworkTransmitThroughput",
            "DBInstanceIdentifier",
            "delius-jitbit-development-database"
          ],
          [".", "NetworkReceiveThroughput", ".", "."]
        ],
        "region": "eu-west-2",
        "title": "Network Throughput"
      }
    },
    {
      "height": 6,
      "width": 6,
      "y": 27,
      "x": 12,
      "type": "metric",
      "properties": {
        "view": "timeSeries",
        "stacked": false,
        "metrics": [
          [
            "AWS/RDS",
            "FreeableMemory",
            "DBInstanceIdentifier",
            "delius-jitbit-development-database"
          ]
        ],
        "region": "eu-west-2"
      }
    },
    {
      "height": 6,
      "width": 6,
      "y": 27,
      "x": 18,
      "type": "metric",
      "properties": {
        "metrics": [
          [
            "AWS/RDS",
            "DiskQueueDepth",
            "DBInstanceIdentifier",
            "delius-jitbit-development-database",
            { "color": "#9467bd" }
          ]
        ],
        "view": "timeSeries",
        "stacked": false,
        "region": "eu-west-2",
        "stat": "Average",
        "period": 300
      }
    },
    {
      "height": 6,
      "width": 8,
      "y": 14,
      "x": 0,
      "type": "metric",
      "properties": {
        "view": "timeSeries",
        "stacked": false,
        "metrics": [
          [
            "AWS/ApplicationELB",
            "HTTPCode_Target_4XX_Count",
            "LoadBalancer",
            "app/delius-jitbit-lb/b439505d1acde0b2"
          ]
        ],
        "region": "eu-west-2"
      }
    },
    {
      "height": 6,
      "width": 8,
      "y": 14,
      "x": 8,
      "type": "metric",
      "properties": {
        "view": "timeSeries",
        "stacked": false,
        "metrics": [
          [
            "AWS/ApplicationELB",
            "TargetResponseTime",
            "LoadBalancer",
            "app/delius-jitbit-lb/b439505d1acde0b2"
          ]
        ],
        "region": "eu-west-2"
      }
    },
    {
      "type": "log",
      "x": 0,
      "y": 33,
      "width": 24,
      "height": 6,
      "properties": {
        "query": "SOURCE 'delius-jitbit-ecs' | fields @timestamp, @message, @logStream\n| sort @timestamp desc\n| filter @message like /useless/\n| limit 1000",
        "region": "eu-west-2",
        "stacked": false,
        "title": "Log group: delius-jitbit-ecs",
        "view": "table"
      }
    }
  ]
}
